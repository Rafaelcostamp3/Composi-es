<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Player Custom Rafael Costa</title>
<style>
:root {
  --bg:#1a1a1a;
  --box:#252525;
  --accent:#c73636;
  --text:#e0e0e0;
  --shadow:rgba(0,0,0,0.7);
}

body {
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:var(--bg);
  font-family:'Inter', sans-serif;
  color:var(--text);
}

.player-container {
  width:min(420px,95vw);
  background:var(--box);
  border-radius:16px;
  box-shadow:0 10px 40px var(--shadow);
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

.player-header {
  padding:16px;
  border-bottom:1px solid rgba(255,255,255,0.1);
  font-weight:600;
  font-size:16px;
  text-align:center;
  background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(0,0,0,0.05));
}

.track-list {
  max-height:300px;
  overflow-y:auto;
}

.track {
  padding:10px 16px;
  border-bottom:1px solid rgba(255,255,255,0.05);
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.track.active {
  background:rgba(199,54,54,0.2);
}

.controls {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 16px;
  background:rgba(0,0,0,0.1);
}

.controls button {
  background:var(--accent);
  border:none;
  border-radius:50%;
  width:40px;
  height:40px;
  color:white;
  font-size:18px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:transform 0.2s;
}

.controls button:hover {
  transform:scale(1.1);
}

.progress-bar {
  flex:1;
  height:6px;
  background:rgba(255,255,255,0.2);
  border-radius:3px;
  margin:0 12px;
  position:relative;
  overflow:hidden;
}

.progress-bar-inner {
  height:100%;
  width:0%;
  background:var(--accent);
  border-radius:3px;
  transition: width 0.1s linear;
}

.credit {
  font-size:11px;
  padding:8px 16px;
  text-align:center;
  color:var(--text);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.credit a {
  color:var(--text);
  text-decoration:none;
  font-weight:300;
}

@media (max-width:360px){
  .player-header{ font-size:14px; padding:12px; }
  .controls button{ width:36px; height:36px; font-size:16px; }
}
</style>
</head>
<body>

<div class="player-container">
  <div class="player-header">Composições Rafael Costa</div>

  <div class="track-list" id="trackList">
    <!-- Lista de faixas será preenchida via JS -->
  </div>

  <div class="controls">
    <button id="prev">&#9664;</button>
    <button id="playPause">&#9658;</button>
    <button id="next">&#9654;</button>
    <div class="progress-bar">
      <div class="progress-bar-inner" id="progress"></div>
    </div>
  </div>

  <div class="credit">
    <a href="https://soundcloud.com/rafael-costa-709828440" target="_blank" rel="noopener">Rafael Costa</a>
    ·
    <a href="https://soundcloud.com/rafael-costa-709828440/sets/composicoes-rafael-costa" target="_blank" rel="noopener">Composições Rafael Costa</a>
  </div>
</div>

<script src="https://w.soundcloud.com/player/api.js"></script>
<script>
const playlistUrl = 'https://api.soundcloud.com/playlists/2108588519?client_id=YOUR_CLIENT_ID';

// Para funcionar, você precisa de um CLIENT_ID SoundCloud. Substitua YOUR_CLIENT_ID pelo seu.

let trackData = [];
let currentTrackIndex = 0;
let isPlaying = false;

const trackListEl = document.getElementById('trackList');
const playPauseBtn = document.getElementById('playPause');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const progressEl = document.getElementById('progress');

let iframeEl, widget;

// Carrega dados da playlist
async function loadPlaylist() {
  const res = await fetch(playlistUrl);
  const data = await res.json();
  trackData = data.tracks;

  trackListEl.innerHTML = trackData.map((track, index) => `
    <div class="track" data-index="${index}">
      ${track.title}
    </div>
  `).join('');

  trackListEl.querySelectorAll('.track').forEach(el => {
    el.addEventListener('click', () => playTrack(parseInt(el.dataset.index)));
  });

  initWidget();
}

// Inicializa o widget do SoundCloud para o track atual
function initWidget() {
  iframeEl = document.createElement('iframe');
  iframeEl.style.width = '100%';
  iframeEl.style.height = '0px'; // invisível, só usamos o áudio
  iframeEl.style.border = 'none';
  document.body.appendChild(iframeEl);
  widget = SC.Widget(iframeEl);
  playTrack(0);
}

// Tocar uma faixa específica
function playTrack(index) {
  currentTrackIndex = index;
  const track = trackData[index];
  trackListEl.querySelectorAll('.track').forEach(el => el.classList.remove('active'));
  trackListEl.querySelector(`.track[data-index="${index}"]`).classList.add('active');

  widget.load(track.uri, { auto_play:true });
  isPlaying = true;
  updatePlayButton();
}

// Play/Pause
function togglePlay() {
  if (!widget) return;
  widget.isPaused(paused => {
    if(paused) widget.play();
    else widget.pause();
    isPlaying = !paused;
    updatePlayButton();
  });
}

function updatePlayButton() {
  playPauseBtn.textContent = isPlaying ? '❚❚' : '▶';
}

// Próxima faixa
function nextTrack() {
  let nextIndex = (currentTrackIndex + 1) % trackData.length;
  playTrack(nextIndex);
}

// Faixa anterior
function prevTrack() {
  let prevIndex = (currentTrackIndex - 1 + trackData.length) % trackData.length;
  playTrack(prevIndex);
}

// Atualiza barra de progresso
function updateProgress() {
  if (!widget) return;
  widget.getPosition(pos => {
    widget.getDuration(dur => {
      progressEl.style.width = `${(pos/dur)*100}%`;
    });
  });
  requestAnimationFrame(updateProgress);
}

// Eventos dos botões
playPauseBtn.addEventListener('click', togglePlay);
nextBtn.addEventListener('click', nextTrack);
prevBtn.addEventListener('click', prevTrack);

loadPlaylist();
updateProgress();
</script>

</body>
</html>

<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SoundCloud Player - Sofisticado (Responsivo)</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{
      height:100%;
      font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background:linear-gradient(180deg,#0f0f10 0%, #121217 100%);
      color:#e9e9ea;
    }

    .sc-player-wrap{
      max-width:920px;
      margin:40px auto;
      padding:20px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:16px;
      box-shadow:0 8px 30px rgba(2,6,23,0.6);
      display:flex;
      gap:20px;
      align-items:center;
      transition:all .3s ease;
      min-height:160px;
    }

    .sc-art{
      width:220px;
      height:220px;
      border-radius:12px;
      overflow:hidden;
      flex-shrink:0;
      background:linear-gradient(135deg,#1b1b1f 0%, #151418 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      border:1px solid rgba(255,255,255,0.03);
    }
    .sc-art img{width:100%;height:100%;object-fit:cover;display:block}

    .sc-info{flex:1;display:flex;flex-direction:column;gap:12px}
    .title{font-size:20px;font-weight:600;letter-spacing:0.2px}
    .artist{font-size:13px;color:#bdbfc6}

    .controls{display:flex;align-items:center;gap:14px;flex-wrap:wrap}
    .btn{background:transparent;border:0;padding:10px;border-radius:10px;cursor:pointer;display:inline-grid;place-items:center;transition:all .18s ease;color:#fff}
    .btn:hover{transform:translateY(-3px);filter:brightness(1.1)}

    .play{width:60px;height:60px;background:linear-gradient(135deg,#c73636,#ff6b6b);box-shadow:0 8px 24px rgba(199,54,54,0.22);border-radius:14px}
    .mini{width:42px;height:42px;background:rgba(255,255,255,0.02);border-radius:10px}

    .progress-wrap{width:100%;display:flex;align-items:center;gap:12px}
    .time{font-size:12px;color:#bdbfc6;width:48px;text-align:center}
    .progress{flex:1;height:8px;border-radius:99px;background:linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.03));position:relative;cursor:pointer}
    .progress > .bar{height:100%;width:0;border-radius:99px;background:linear-gradient(90deg,#ff8b8b,#c73636);box-shadow:0 6px 18px rgba(199,54,54,0.16)}
    .progress .thumb{position:absolute;left:0;top:50%;transform:translate(-50%,-50%);width:14px;height:14px;border-radius:50%;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.6);opacity:0;transition:opacity .12s}
    .progress:hover .thumb{opacity:1}

    .volume-wrap{display:flex;align-items:center;gap:8px}
    .volume{width:110px;height:6px;border-radius:99px;background:rgba(255,255,255,0.03);position:relative;cursor:pointer}
    .volume > .vbar{height:100%;width:60%;border-radius:99px;background:linear-gradient(90deg,#ffd7d7,#c73636)}

    .attribution{margin-top:10px;font-size:11px;color:#9fa3ab;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    /* RESPONSIVIDADE */
    @media (max-width: 900px){
      .sc-player-wrap{
        flex-direction:column;
        align-items:stretch;
        padding:24px 18px;
      }
      .sc-art{
        width:180px;
        height:180px;
        margin:0 auto;
      }
      .sc-info{text-align:center}
      .controls{flex-direction:column;align-items:center}
    }

    @media (max-width: 600px){
      .sc-player-wrap{padding:18px;margin:20px}
      .sc-art{width:150px;height:150px}
      .title{font-size:18px}
      .artist{font-size:12px}
      .controls{gap:20px}
      .volume{width:80px}
      .play{width:54px;height:54px}
    }

    @media (max-width: 400px){
      .sc-player-wrap{margin:10px;padding:16px;border-radius:10px}
      .sc-art{width:120px;height:120px}
      .title{font-size:16px}
      .volume{display:none}
    }

    a{color:inherit}
    button:focus, .progress:focus{outline:2px solid rgba(199,54,54,0.25);outline-offset:2px}
  </style>
</head>
<body>

  <div class="sc-player-wrap" role="region" aria-label="SoundCloud player">
    <div class="sc-art" id="sc-art">
      <svg width="90" height="90" viewBox="0 0 24 24" fill="none" aria-hidden="true" style="opacity:.06">
        <path d="M12 2C7 2 3.4 5.6 3.4 10.2c0 3 1.7 5.6 4.4 7.1L12 22l4.2-4.7c2.7-1.5 4.4-4.1 4.4-7.1C20.6 5.6 17 2 12 2z" fill="currentColor"/>
      </svg>
    </div>

    <div class="sc-info">
      <div>
        <div class="title" id="sc-title">Carregando playlist...</div>
        <div class="artist" id="sc-artist">SoundCloud</div>
      </div>

      <div class="controls" style="margin-top:6px">
        <div style="display:flex;align-items:center;gap:12px;flex-direction:column">
          <button class="btn play" id="btn-play" aria-label="Play/Pause">
            <svg id="icon-play" viewBox="0 0 24 24" width="26" height="26" fill="none" aria-hidden="true">
              <path d="M5 3v18l15-9L5 3z" fill="#fff"/>
            </svg>
            <svg id="icon-pause" viewBox="0 0 24 24" width="26" height="26" fill="none" aria-hidden="true" style="display:none">
              <path d="M6 4h4v16H6zM14 4h4v16h-4z" fill="#fff"/>
            </svg>
          </button>

          <div style="display:flex;gap:8px">
            <button class="btn mini prev" id="btn-prev">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none"
                   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
            </button>

            <button class="btn mini next" id="btn-next">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none"
                   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 6 15 12 9 18"></polyline>
              </svg>
            </button>
          </div>
        </div>

        <div style="flex:1">
          <div class="progress-wrap">
            <div class="time" id="time-current">0:00</div>
            <div class="progress" id="progress" role="slider" aria-label="Barra de progresso" tabindex="0">
              <div class="bar" id="bar"></div>
              <div class="thumb" id="thumb" aria-hidden="true"></div>
            </div>
            <div class="time" id="time-total">0:00</div>
          </div>

          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
            <div class="volume-wrap" style="align-items:center">
              <button class="btn mini" id="btn-mute" title="Mute/Unmute" aria-label="Mute">
                <svg viewBox="0 0 24 24" width="14" height="14"><path d="M5 9v6h4l5 4V5L9 9H5z" fill="currentColor"/></svg>
              </button>
              <div class="volume" id="volume">
                <div class="vbar" id="vbar"></div>
              </div>
            </div>

            <div style="text-align:right">
              <div style="font-size:12px;color:#bdbfc6">Playlist SoundCloud</div>
              <div class="attribution"><a id="sc-user-link" href="#" target="_blank" style="color:inherit;text-decoration:none;opacity:.84">Rafael Costa Â· ComposiÃ§Ãµes Rafael Costa</a></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <iframe id="sc-player-iframe" width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay"
    src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/soundcloud%253Aplaylists%253A2108588519&color=%23c73636&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"
    style="display:none"></iframe>

  <script src="https://w.soundcloud.com/player/api.js"></script>

  <script>
    /* =========================================================
       ðŸš€ SoluÃ§Ã£o 1: Detectar Instagram e redirecionar
    ========================================================= */
    if (navigator.userAgent.includes("Instagram")) {
      // Tenta abrir no navegador padrÃ£o (Chrome ou Safari)
      const current = encodeURIComponent(window.location.href);
      window.location.href = "googlechrome://open-url?url=" + current;

      // Fallback: alerta amigÃ¡vel se nÃ£o abrir
      setTimeout(() => {
        alert("âš ï¸ Para ouvir a mÃºsica, abra este link no seu navegador (Safari ou Chrome) ðŸŽ§");
      }, 1500);
    }

    /* =========================================================
       ðŸŽµ Player SoundCloud Customizado
    ========================================================= */
    const iframe = document.getElementById('sc-player-iframe');
    const widget = SC.Widget(iframe);
    const btnPlay = document.getElementById('btn-play');
    const iconPlay = document.getElementById('icon-play');
    const iconPause = document.getElementById('icon-pause');
    const btnPrev = document.getElementById('btn-prev');
    const btnNext = document.getElementById('btn-next');
    const scTitle = document.getElementById('sc-title');
    const scArtist = document.getElementById('sc-artist');
    const scArt = document.getElementById('sc-art');
    const bar = document.getElementById('bar');
    const thumb = document.getElementById('thumb');
    const progress = document.getElementById('progress');
    const timeCurrent = document.getElementById('time-current');
    const timeTotal = document.getElementById('time-total');
    const volume = document.getElementById('volume');
    const vbar = document.getElementById('vbar');
    const btnMute = document.getElementById('btn-mute');
    const scUserLink = document.getElementById('sc-user-link');

    let duration = 0, position = 0, isPlaying = false, isMuted = false;

    function fmt(ms){ const s=Math.floor(ms/1000);const m=Math.floor(s/60);return m+':'+String(s%60).padStart(2,'0'); }

    widget.bind(SC.Widget.Events.READY, function(){
      widget.getDuration(d=>{ duration=d||0; timeTotal.textContent=fmt(duration); });
      widget.bind(SC.Widget.Events.PLAY, function(){
        isPlaying=true; toggleIcons();
        widget.getCurrentSound(function(sound){
          if(sound){
            scTitle.textContent=sound.title||'Untitled';
            scArtist.textContent=sound.user?.username||'';
            scUserLink.href=sound.user?.permalink_url||'#';
            const art=(sound.artwork_url||sound.user?.avatar_url)?.replace('-large','-t500x500');
            if(art) scArt.innerHTML='<img src="'+art+'" alt="Capa">';
          }
        });
      });
      widget.bind(SC.Widget.Events.PAUSE, ()=>{isPlaying=false;toggleIcons();});
      widget.bind(SC.Widget.Events.FINISH, ()=>{isPlaying=false;toggleIcons();});
      widget.bind(SC.Widget.Events.PLAY_PROGRESS, e=>{
        position=e.currentPosition||0; duration=e.duration||duration;
        timeCurrent.textContent=fmt(position);
        timeTotal.textContent=fmt(duration);
        updateProgress();
      });
    });

    function updateProgress(){ const pct=duration?Math.min(1,position/duration):0; bar.style.width=(pct*100)+'%'; thumb.style.left=(pct*100)+'%'; }
    function toggleIcons(){ iconPlay.style.display=isPlaying?'none':'block'; iconPause.style.display=isPlaying?'block':'none'; }

    btnPlay.onclick=()=>widget.isPaused(p=>p?widget.play():widget.pause());
    btnPrev.onclick=()=>widget.prev();
    btnNext.onclick=()=>widget.next();
    progress.onclick=e=>{const r=progress.getBoundingClientRect();widget.seekTo(Math.round((e.clientX-r.left)/r.width*duration));};
    volume.onclick=e=>{const r=volume.getBoundingClientRect();const pct=Math.max(0,Math.min(1,(e.clientX-r.left)/r.width));vbar.style.width=(pct*100)+'%';widget.setVolume(Math.round(pct*100));isMuted=pct===0;};
    btnMute.onclick=()=>{if(!isMuted){widget.setVolume(0);vbar.style.width='0%';isMuted=true;}else{widget.setVolume(80);vbar.style.width='80%';isMuted=false;}};
  </script>
</body>
</html>
